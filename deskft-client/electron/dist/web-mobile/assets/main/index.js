System.register("chunks:///_virtual/ballItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./canvas.ts"],(function(n){var t,o,e,i,r,a,l,s,c,u;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,e=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,l=n.Node,s=n.CylinderCollider,c=n.Component},function(n){u=n.canvas}],execute:function(){var p,f,h,d,v;r._RF.push({},"d2869tf3nBObKBp1jTFzQSb","ballItem",void 0);var y=a.ccclass,m=a.property;n("ballItem",(p=y("ballItem"),f=m({type:l}),p((v=t((d=function(n){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,e(t,"canvas2D",v,i(t)),t}o(t,n);var r=t.prototype;return r.start=function(){this.node.getComponent(s).on("onCollisionEnter",this.onCollisionEnter,this),this.node.getComponent(s).on("onCollisionStay",this.onCollisionStay,this)},r.onCollisionStay=function(n){this.canvas2D.getComponent(u).clearMoveTime()},r.onCollisionEnter=function(n){},r.uicoordinate=function(n,t,o){this.canvas2D.getComponent(u).drawBallNumber2D(n,t,o)},r.update=function(n){},t}(c)).prototype,"canvas2D",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=d))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/ballItemMatMnger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./canvas.ts"],(function(e){var t,a,r,n,o,l,i,s,c,u,m,p,g,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,i=e.Node,s=e.MeshRenderer,c=e.Material,u=e.assetManager,m=e.Texture2D,p=e.Label,g=e.Component},function(e){M=e.canvas}],execute:function(){var b,h,v,d,f,y,N;o._RF.push({},"d595eBtZg1EhYB/YHbZkm1k","ballItemMatMnger",void 0);var C=l.ccclass,D=l.property;e("ballItemMatMnger",(b=C("ballItemMatMnger"),h=D({type:i}),v=D({type:i}),b((y=t((f=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"ballMesh",y,n(t)),r(t,"canvas2D",N,n(t)),t.teamNum=0,t.memberNum=0,t.avatarMat=null,t}a(t,e);var o=t.prototype;return o.start=function(){this.teamNum=parseInt(this.name.split("_")[1]),this.memberNum=parseInt(this.name.split("_")[2]);var e=this.ballMesh.getComponent(s),t=e.getRenderMaterial(1),a=new c;a.copy(t),this.avatarMat=a,this.avatarMat.setProperty("albedoMap",null),e.setSharedMaterial(this.avatarMat,1)},o.setAvatarMat=function(e){var t=this,a=e.uface;console.log(a),u.loadRemote(a,(function(a,r){if(a)return console.error("loadRemote err"),void console.error(a);console.log("loadRemote success"),console.log(r);var n=new m;n.image=r,t.avatarMat.setProperty("albedoMap",n);var o=t.canvas2D.getComponent(M).getBallNameNode(t.teamNum,t.memberNum);console.log(o),o&&(o[0].getChildByName("Label-player").getComponent(p).string=e.uname,o[0].getChildByName("Label-player-bg").getComponent(p).string=e.uname)}))},o.update=function(e){},t}(g)).prototype,"ballMesh",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(f.prototype,"canvas2D",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/CameraMnger.ts",["cc","./canvas.ts"],(function(e){var a,t,r;return{setters:[function(e){a=e.cclegacy,t=e.Camera},function(e){r=e.canvas}],execute:function(){a._RF.push({},"e69feRMHjZPQ6cjJsTxMgNv","CameraMnger",void 0);e("CameraMnger",function(){function e(e){this.GameCamera=null,this.PreviewCamera=null,this.canvas2D=null,this.canvas2D=e.canvas2D,this.GameCamera=e.GameCamera,this.PreviewCamera=e.PreviewCamera,this.setFirstCamera("preview")}return e.prototype.setFirstCamera=function(e){"preview"==e?(this.canvas2D.getComponent(r).ballsName.active=!1,this.GameCamera.getComponent(t).priority=0,this.PreviewCamera.getComponent(t).priority=1):(this.canvas2D.getComponent(r).ballsName.active=!0,this.GameCamera.getComponent(t).priority=1,this.PreviewCamera.getComponent(t).priority=0)},e}());a._RF.pop()}}}));

System.register("chunks:///_virtual/canvas.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameInit.ts","./gameProcess.ts","./voteCatapult.ts","./voteSelectBall.ts"],(function(e){var t,i,n,o,a,l,r,s,m,g,p,h,u,d,C,y,c,v,b,B,N;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,l=e._decorator,r=e.Node,s=e.tween,m=e.Vec3,g=e.Label,p=e.RigidBody,h=e.RenderTexture,u=e.Camera,d=e.SpriteFrame,C=e.Sprite,y=e.instantiate,c=e.Component},function(e){v=e.gameInit},function(e){b=e.GameProcess},function(e){B=e.VoteCatapult},function(e){N=e.VoteBall}],execute:function(){var f,P,x,T,_,w,I,G,L,U,z,V,D,S,k,A,R,F,M,O,E,j,H,X,q,J,K,Q,W;a._RF.push({},"4a679UpkIhAU5kFCGXm5p3B","canvas",void 0);var Y=l.ccclass,Z=l.property;e("canvas",(f=Y("canvas"),P=Z({type:r}),x=Z({type:r}),T=Z({type:r}),_=Z({type:r}),w=Z({type:r}),I=Z({type:r}),G=Z({type:r}),L=Z({type:r}),U=Z({type:r}),z=Z({type:r}),V=Z({type:r}),D=Z({type:r}),S=Z({type:r}),f((R=t((A=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,n(t,"ballName",R,o(t)),n(t,"gridName",F,o(t)),n(t,"processTip",M,o(t)),n(t,"playText",O,o(t)),n(t,"gridsName",E,o(t)),n(t,"ballsName",j,o(t)),t.ballNameList=[],t.gameProcess=null,t.voteBall=null,t.voteCatapult=null,t.red_targetGrid=null,t.blue_targetGrid=null,n(t,"step1_ui",H,o(t)),n(t,"step2_ui",X,o(t)),n(t,"mapGrid",q,o(t)),n(t,"gameInit",J,o(t)),t.move_timer=0,n(t,"scoreNode",K,o(t)),n(t,"leftUiPreview",Q,o(t)),n(t,"bottomUi",W,o(t)),t.pushNextTimer=null,t.drawBallNumber2D=function(e,i,n){var o=t.checkBallNumber(n);if(-1==o){var a=y(t.ballName);a.name=n,a.active=!0,a.setPosition(e.x,e.y,e.z);var l=n.split("_")[2];a.getChildByName("Label").getComponent(g).string=parseInt(l)+1+"";var r=parseInt(n.split("_")[1]),s=parseInt(n.split("_")[2]),m=t.gameInit.getComponent(v).playerPool.PlayerList.filter((function(e){e.team==r&&e.member==s-1&&(a.getChildByName("Label-player").getComponent(g).string=e.name)}));a.getChildByName("Label-player").getComponent(g).string=m.length>0?m[0].uname:"空缺",a.getChildByName("Label-player-bg").getComponent(g).string=m.length>0?m[0].uname:"空缺",t.ballsName.addChild(a),t.ballNameList.push(a)}else t.ballNameList[o].setPosition(e.x,e.y,e.z)},t.clearBallNumber2D=function(){for(var e=0;e<t.ballNameList.length;e++)t.ballNameList[e].destroy();t.ballNameList=[]},t.getBallNameNode=function(e,i){return console.log(e,i),t.ballNameList.filter((function(t,n){if(t.name=="ball_"+e+"_"+i)return t}))},t.drawMapGridNumber2D=function(e,i,n){var o=n.split("_"),a=parseInt(o[1]),l=parseInt(o[2]),r=t.numberToLetter(a);if(0==l){var s=y(t.gridName);s.name=r,s.active=!0,s.setPosition(e.x,e.y+60,e.z),s.getChildByName("Label").getComponent(g).string=r,t.gridsName.addChild(s)}if(5==a){var m=y(t.gridName);m.name=l+"",m.active=!0,m.setPosition(e.x+60,e.y,e.z),m.getChildByName("Label").getComponent(g).string=l+"",t.gridsName.addChild(m)}},t.checkBallNumber=function(e){var i=-1;return t.ballNameList.forEach((function(t,n){t.name==e&&(i=n)})),i},t}i(t,e);var a=t.prototype;return a.start=function(){this.gameProcess=new b,this.voteBall=new N,this.leftUiCameraPreview()},a.releaseStart=function(){var e=this,t={left:this.leftUiPreview.position.x,bottom:this.bottomUi.position.y,playText:this.playText.position.x};s(t).to(.5,{left:-440,bottom:0,playText:490},{easing:"sineOut",onUpdate:function(){e.leftUiPreview.setPosition(new m(t.left,0,0)),e.bottomUi.setPosition(new m(0,t.bottom,0)),e.playText.setPosition(new m(t.playText,0,0))},onComplete:function(){e.gamePushOn()}}).start()},a.gamePushOn=function(){var e=this.node.getComponent(t).gameProcess;console.log(e);var i=e.stepList[e.stepIdx];this.processTip.getComponent(g).string=i.tipStr,i.title&&(this.playText.getChildByName("Title_Label").getComponent(g).string=i.title),console.log(i.stepIdx),1==i.stepIdx&&(this.selectBallStep(),this.leftUiCameraPreview()),2==i.stepIdx&&this.catapultStep(),3==i.stepIdx&&(this.ballMoveStep(),e.stepIdx=-1,this.voteBall.clearVotePool(),this.voteCatapult.clearVotePool(),this.gameInit.getComponent(v).playerPool.moveBallVoteList=[],this.clearMoveTime()),e.stepIdx+=1,this.leftUiCameraPreview()},a.goalBallStep=function(e){var t=this;this.gameProcess.goalBall(e),this.clearMoveTime(),clearInterval(this.pushNextTimer);var i=this.scoreNode.getChildByPath("teamNum/red"),n=this.scoreNode.getChildByPath("teamNum/blue");i.getComponent(g).string=this.gameProcess.score.red+"",n.getComponent(g).string=this.gameProcess.score.blue+"";var o=this.scoreNode.getChildByName("goal-text"),a=this.scoreNode.getChildByName("teamNum");s(o.position).to(.3,new m(0,80,0),{easing:"sineOut",onUpdate:function(e){o.setPosition(e)},onComplete:function(){setTimeout((function(){s(o.position).to(.3,new m(0,500,0),{easing:"sineIn",onUpdate:function(e){o.setPosition(e)}}).start()}),2e3)}}).start(),s(a.position).to(.3,new m(0,-20,0),{easing:"sineOut",onUpdate:function(e){a.setPosition(e)},onComplete:function(){setTimeout((function(){s(a.position).to(.3,new m(0,-500,0),{easing:"sineIn",onUpdate:function(e){a.setPosition(e)},onComplete:function(){t.nextRound()}}).start()}),2e3)}}).start()},a.nextRound=function(){var e=this.gameProcess.nextRound();e.restart?this.restartGame(e.victory):(this.gameInit.getComponent(v).reInit(),this.clearBallNumber2D(),this.voteBall.clearVotePool(),this.voteCatapult.clearVotePool(),this.clearMoveTime(),clearInterval(this.pushNextTimer),this.gamePushOn(),this.leftUiCameraPreview(),this.gameInit.getComponent(v).autoPlay_type&&this.gameInit.getComponent(v).startAutoLoopGame())},a.restartGame=function(e){var t,i=this;t="red"==e?this.scoreNode.getChildByName("victory-red"):this.scoreNode.getChildByName("victory-blue"),s(t.position).to(.3,new m(0,0,0),{easing:"sineOut",onUpdate:function(e){t.setPosition(e)},onComplete:function(){setTimeout((function(){s(t.position).to(.3,new m(0,600,0),{easing:"sineIn",onUpdate:function(e){t.setPosition(e)},onComplete:function(){i.gameInit.getComponent(v).reInit(),i.clearBallNumber2D(),i.gameProcess=new b,i.voteBall=new N,i.voteCatapult=null,i.red_targetGrid=null,i.blue_targetGrid=null,i.ballNameList=[],i.clearMoveTime(),clearInterval(i.pushNextTimer),i.gamePushOn(),i.leftUiCameraPreview(),i.gameInit.getComponent(v).autoPlay_type&&i.gameInit.getComponent(v).startAutoLoopGame()}}).start()}),2e3)}}).start()},a.ballMoveStep=function(){var e=this;this.ballMove(),this.hideMapGridAndGridsName(),s(this.step2_ui.position).to(.3,new m(600,0,0),{easing:"smooth",onUpdate:function(t){e.step2_ui.setPosition(t)},onComplete:function(){}}).start()},a.hideMapGridAndGridsName=function(){this.gameInit.getComponent(v).hideGround();for(var e=0;e<6;e++){var t=this.numberToLetter(e);this.gridsName.getChildByName(t).destroy()}for(var i=0;i<8;i++){var n=i+"";this.gridsName.getChildByName(n).destroy()}},a.ballMove=function(){var e=this,t=this.mapGrid.getChildByName("ball_1_"+this.voteBall.getTeamVoteDetail("red").first.ballIdx),i=this.mapGrid.getChildByName("ball_2_"+this.voteBall.getTeamVoteDetail("blue").first.ballIdx),n=t.getComponent(p),o=i.getComponent(p),a=this.voteCatapult.getTeamVoteResult("red").power.first.power,l=this.voteCatapult.getTeamVoteResult("blue").power.first.power;this.gameInit.getComponent(v).playerPool.moveBallVoteList.forEach((function(t){var i=e.mapGrid.getChildByName(t.ballName).getComponent(p),n=t.power;t.ballName=="ball_1_"+e.voteBall.getTeamVoteDetail("red").first.ballIdx?a+=n:t.ballName=="ball_2_"+e.voteBall.getTeamVoteDetail("blue").first.ballIdx?l+=n:i.applyLocalImpulse(new m(0,0,-n/2))})),n.applyLocalImpulse(new m(0,0,-a/2)),o.applyLocalImpulse(new m(0,0,-l/2)),this.moveTimer()},a.moveTimer=function(){var e=this;this.pushNextTimer=setInterval((function(){e.move_timer+=1,console.log(e.move_timer),e.move_timer>=3&&(clearInterval(e.pushNextTimer),e.gamePushOn(),e.gameInit.getComponent(v).autoPlay_type&&e.gameInit.getComponent(v).startAutoLoopGame())}),1e3)},a.clearMoveTime=function(){this.move_timer=0},a.catapultStep=function(){var e=this;this.cameraPreviewFindSelectBall(),this.leftUiCameraPreview(),this.gameInit.getComponent(v).groundInit(),this.voteCatapult=new B,this.catapultStepUIBinding(),s(this.step1_ui.position).to(.3,new m(300,0,0),{easing:"smooth",onUpdate:function(t){e.step1_ui.setPosition(t)}}).start(),s(this.step2_ui.position).to(.3,new m(0,0,0),{easing:"smooth",onUpdate:function(t){e.step2_ui.setPosition(t)}}).start()},a.catapultStepUIBinding=function(){var e=this.voteCatapult.getTeamVoteResult("red"),t=this.voteCatapult.getTeamVoteResult("blue"),i=e.gridPos.first,n=e.gridPos.second,o=e.gridPos.third,a=this.step2_ui.getChildByPath("Team1/posItem"),l=this.step2_ui.getChildByPath("Team1/posItem-001"),r=this.step2_ui.getChildByPath("Team1/posItem-002");if(null!=i){var h=this.numberToLetter(i.x)+i.y,u=i.voteNum;a.getChildByPath("posText").getComponent(g).string=h,a.getChildByPath("posText-vote").getComponent(g).string=u+" 票"}else a.getChildByPath("posText").getComponent(g).string="-",a.getChildByPath("posText-vote").getComponent(g).string="- 票";if(null!=n){var d=this.numberToLetter(n.x)+n.y,C=n.voteNum;l.getChildByPath("posText").getComponent(g).string=d,l.getChildByPath("posText-vote").getComponent(g).string=C+" 票"}else l.getChildByPath("posText").getComponent(g).string="-",l.getChildByPath("posText-vote").getComponent(g).string="- 票";if(null!=o){var y=this.numberToLetter(o.x)+o.y,c=o.voteNum;r.getChildByPath("posText").getComponent(g).string=y,r.getChildByPath("posText-vote").getComponent(g).string=c+" 票"}else r.getChildByPath("posText").getComponent(g).string="-",r.getChildByPath("posText-vote").getComponent(g).string="- 票";var b=e.power.first,B=e.power.second,N=e.power.third,f=this.step2_ui.getChildByPath("Team1/intensity-item"),P=this.step2_ui.getChildByPath("Team1/intensity-item-001"),x=this.step2_ui.getChildByPath("Team1/intensity-item-002");null!=b?(f.getChildByPath("intensityText-value").getComponent(g).string=b.power+"%",f.getChildByPath("vote-text").getComponent(g).string=b.voteNum+" 票"):(f.getChildByPath("intensityText-value").getComponent(g).string="-",f.getChildByPath("vote-text").getComponent(g).string="- 票"),null!=B?(P.getChildByPath("intensityText-value").getComponent(g).string=B.power+"%",P.getChildByPath("vote-text").getComponent(g).string=B.voteNum+" 票"):(P.getChildByPath("intensityText-value").getComponent(g).string="-",P.getChildByPath("vote-text").getComponent(g).string="- 票"),null!=N?(x.getChildByPath("intensityText-value").getComponent(g).string=N.power+"%",x.getChildByPath("vote-text").getComponent(g).string=N.voteNum+" 票"):(x.getChildByPath("intensityText-value").getComponent(g).string="-",x.getChildByPath("vote-text").getComponent(g).string="- 票");var T=t.gridPos.first,_=t.gridPos.second,w=t.gridPos.third,I=this.step2_ui.getChildByPath("Team2/posItem"),G=this.step2_ui.getChildByPath("Team2/posItem-001"),L=this.step2_ui.getChildByPath("Team2/posItem-002");if(null!=T){console.log(T);var U=this.numberToLetter(T.x)+T.y,z=T.voteNum;I.getChildByPath("posText").getComponent(g).string=U,I.getChildByPath("posText-vote").getComponent(g).string=z+" 票"}else I.getChildByPath("posText").getComponent(g).string="-",I.getChildByPath("posText-vote").getComponent(g).string="- 票";if(null!=_){var V=this.numberToLetter(_.x)+_.y,D=_.voteNum;G.getChildByPath("posText").getComponent(g).string=V,G.getChildByPath("posText-vote").getComponent(g).string=D+" 票"}else G.getChildByPath("posText").getComponent(g).string="-",G.getChildByPath("posText-vote").getComponent(g).string="- 票";if(null!=w){var S=this.numberToLetter(w.x)+w.y,k=w.voteNum;L.getChildByPath("posText").getComponent(g).string=S,L.getChildByPath("posText-vote").getComponent(g).string=k+" 票"}else L.getChildByPath("posText").getComponent(g).string="-",L.getChildByPath("posText-vote").getComponent(g).string="- 票";var A=t.power.first,R=t.power.second,F=t.power.third,M=this.step2_ui.getChildByPath("Team2/intensity-item"),O=this.step2_ui.getChildByPath("Team2/intensity-item-001"),E=this.step2_ui.getChildByPath("Team2/intensity-item-002");null!=A?(M.getChildByPath("intensityText-value").getComponent(g).string=A.power+"%",M.getChildByPath("vote-text").getComponent(g).string=A.voteNum+" 票"):(M.getChildByPath("intensityText-value").getComponent(g).string="-",M.getChildByPath("vote-text").getComponent(g).string="- 票"),null!=R?(O.getChildByPath("intensityText-value").getComponent(g).string=R.power+"%",O.getChildByPath("vote-text").getComponent(g).string=R.voteNum+" 票"):(O.getChildByPath("intensityText-value").getComponent(g).string="-",O.getChildByPath("vote-text").getComponent(g).string="- 票"),null!=F?(E.getChildByPath("intensityText-value").getComponent(g).string=F.power+"%",E.getChildByPath("vote-text").getComponent(g).string=F.voteNum+" 票"):(E.getChildByPath("intensityText-value").getComponent(g).string="-",E.getChildByPath("vote-text").getComponent(g).string="- 票");var j=this.voteBall.getTeamVoteDetail("red").first.ballIdx,H=this.voteBall.getTeamVoteDetail("blue").first.ballIdx;this.gameInit.getComponent(v).playerPool.PlayerList.forEach((function(e){1==e.team&&e.memberNum-1==j||2!=e.team||e.memberNum}));var X=this.mapGrid.getChildByName("grid_"+i.x+"_"+i.y);if(null==this.red_targetGrid||X!=this.red_targetGrid){var q=this.mapGrid.getChildByName("ball_1_"+j);q.setRotationFromEuler(0,0,0);var J=q.getChildByName("ball");J.lookAt(X.position),q.getComponent(p).type=2;var K={x:q.eulerAngles.x,y:q.eulerAngles.y,z:q.eulerAngles.z};s(K).to(1,{x:0,y:J.eulerAngles.y,z:0},{onComplete:function(e){q.getComponent(p).type=1,J.setRotationFromEuler(new m(0,0,0))},onUpdate:function(e){q.setRotationFromEuler(new m(e.x,e.y,e.z))}}).start(),this.red_targetGrid=X}var Q=this.mapGrid.getChildByName("grid_"+T.x+"_"+T.y);if(null==this.blue_targetGrid||Q!=this.blue_targetGrid){var W=this.mapGrid.getChildByName("ball_2_"+H);W.setRotationFromEuler(0,0,0);var Y=W.getChildByName("ball");Y.lookAt(Q.position),W.getComponent(p).type=2;var Z={x:W.eulerAngles.x,y:W.eulerAngles.y,z:W.eulerAngles.z};s(Z).to(1,{x:0,y:Y.eulerAngles.y,z:0},{onComplete:function(e){W.getComponent(p).type=1,Y.setRotationFromEuler(new m(0,0,0))},onUpdate:function(e){W.setRotationFromEuler(new m(e.x,e.y,e.z))}}).start(),this.blue_targetGrid=Q}},a.cameraPreviewFindSelectBall=function(){var e=this.voteBall.getTeamVoteDetail("red").first.ballIdx,t=this.voteBall.getTeamVoteDetail("blue").first.ballIdx,i=this.mapGrid.getChildByName("ball_1_"+e).getChildByName("Camera"),n=new h;n.reset({width:300,height:200}),i.getComponent(u).targetTexture=n;var o=new d;o.texture=n,this.step2_ui.getChildByPath("Team1/cameraPreview").getComponent(C).spriteFrame=o;var a=this.mapGrid.getChildByName("ball_2_"+t).getChildByName("Camera"),l=new h;l.reset({width:300,height:200}),a.getComponent(u).targetTexture=l;var r=new d;r.texture=l,this.step2_ui.getChildByPath("Team2/cameraPreview").getComponent(C).spriteFrame=r},a.leftUiCameraPreview=function(){var e=this.voteBall.getTeamVoteDetail("red").first.ballIdx,t=this.voteBall.getTeamVoteDetail("blue").first.ballIdx,i=this.mapGrid.getChildByName("ball_1_"+e).getChildByName("Camera-001"),n=new h;n.reset({width:400,height:300}),i.getComponent(u).targetTexture=n;var o=new d;o.texture=n,this.leftUiPreview.getChildByName("red").getComponent(C).spriteFrame=o;var a=this.mapGrid.getChildByName("ball_2_"+t).getChildByName("Camera-001"),l=new h;l.reset({width:400,height:300}),a.getComponent(u).targetTexture=l;var r=new d;r.texture=l,this.leftUiPreview.getChildByName("blue").getComponent(C).spriteFrame=r},a.selectBallStep=function(){var e=this;this.selectBall_uiBinding(),s(this.step1_ui.position).to(.3,new m(0,0,0),{easing:"smooth",onUpdate:function(t){e.step1_ui.setPosition(t)}}).start()},a.selectBall_uiBinding=function(){var e=this.voteBall.getTeamVoteDetail("red"),t=this.voteBall.getTeamVoteDetail("blue");console.log("---获取票池结果---"),this.step1_ui.getChildByPath("Team1/ball_icon_frist/ballName").getComponent(g).string=e.first.ballIdx+1+"";var i=this.step1_ui.getChildByPath("Team1/ball_icon_001");i.getChildByName("ballName").getComponent(g).string=e.first.ballIdx+1+"",i.getChildByName("voteNum").getComponent(g).string=e.first.voteNum+" 票";var n=this.step1_ui.getChildByPath("Team1/ball_icon_002");null!=e.second.ballIdx?(n.getChildByName("ballName").getComponent(g).string=e.second.ballIdx+1+"",n.getChildByName("voteNum").getComponent(g).string=e.second.voteNum+" 票"):(n.getChildByName("ballName").getComponent(g).string="-",n.getChildByName("voteNum").getComponent(g).string="0 票");var o=this.step1_ui.getChildByPath("Team1/ball_icon_003");null!=e.third.ballIdx?(o.getChildByName("ballName").getComponent(g).string=e.third.ballIdx+1+"",o.getChildByName("voteNum").getComponent(g).string=e.third.voteNum+" 票"):(o.getChildByName("ballName").getComponent(g).string="-",o.getChildByName("voteNum").getComponent(g).string="0 票"),this.step1_ui.getChildByPath("Team2/ball_icon_frist/ballName").getComponent(g).string=t.first.ballIdx+1+"";var a=this.step1_ui.getChildByPath("Team2/ball_icon_001");a.getChildByName("ballName").getComponent(g).string=t.first.ballIdx+1+"",a.getChildByName("voteNum").getComponent(g).string=t.first.voteNum+" 票";var l=this.step1_ui.getChildByPath("Team2/ball_icon_002");null!=t.second.ballIdx?(l.getChildByName("ballName").getComponent(g).string=t.second.ballIdx+1+"",l.getChildByName("voteNum").getComponent(g).string=t.second.voteNum+" 票"):(l.getChildByName("ballName").getComponent(g).string="-",l.getChildByName("voteNum").getComponent(g).string="0 票");var r=this.step1_ui.getChildByPath("Team2/ball_icon_003");null!=t.third.ballIdx?(r.getChildByName("ballName").getComponent(g).string=t.third.ballIdx+1+"",r.getChildByName("voteNum").getComponent(g).string=t.third.voteNum+" 票"):(r.getChildByName("ballName").getComponent(g).string="-",r.getChildByName("voteNum").getComponent(g).string="0 票");for(var s=0;s<5;s++){this.mapGrid.getChildByName("ball_1_"+e.first.ballIdx).getChildByName("Particle").active=!0,this.mapGrid.getChildByName("ball_2_"+t.first.ballIdx).getChildByName("Particle").active=!0,e.first.ballIdx==s?this.mapGrid.getChildByName("ball_1_"+s).getChildByName("Particle").active=!0:this.mapGrid.getChildByName("ball_1_"+s).getChildByName("Particle").active=!1,t.first.ballIdx==s?this.mapGrid.getChildByName("ball_2_"+s).getChildByName("Particle").active=!0:this.mapGrid.getChildByName("ball_2_"+s).getChildByName("Particle").active=!1}this.leftUiCameraPreview()},a.gameStepVote=function(e){var t=this.gameProcess.stepIdx;if(t-1==1){if(-1==e.indexOf("-"))return;var i=e.split("-"),n=i[0],o=parseInt(i[1]);if(isNaN(Number(o)))return void console.log("ballName不是数字");if("红色"!=n&&"蓝色"!=n)return void console.log("team不是红色或蓝色");if("红色"==n&&(n="red"),"蓝色"==n&&(n="blue"),o<1||o>5)return void console.log("ballName不在1-5之间");o-=1,this.voteBall.voteBall(n,o),this.selectBall_uiBinding()}if(t-1==2){if(-1==e.indexOf("-"))return;var a=e.split("-"),l=a[0],r=this.splitGridPos(a[1]),s=parseInt(a[2]);if("红色"!=l&&"蓝色"!=l)return void console.log("team不是红色或蓝色");if("红色"==l&&(l="red"),"蓝色"==l&&(l="blue"),isNaN(Number(r.x))||isNaN(Number(r.y)))return void console.log("gridPos不是数字");if(r.x<0||r.x>5||r.y<0||r.y>7)return void console.log("gridPos不在0-5之间或0-7之间");if(isNaN(Number(s)))return void console.log("power不是数字");if(s<1||s>100)return void console.log("power不在1-100之间");this.voteCatapult.voteCatapult(l,r,s),this.catapultStepUIBinding()}},a.splitGridPos=function(e){var t=e.split("")[0],i=parseInt(e.split("")[1]);return{x:t=this.letterToNumber(t),y:i}},a.numberToLetter=function(e){var t="";switch(e){case 0:t="a";break;case 1:t="b";break;case 2:t="c";break;case 3:t="d";break;case 4:t="e";break;case 5:t="f"}return t},a.letterToNumber=function(e){var t=-1;switch(e){case"a":t=0;break;case"b":t=1;break;case"c":t=2;break;case"d":t=3;break;case"e":t=4;break;case"f":t=5}return t},a.update=function(e){},t}(c)).prototype,"ballName",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(A.prototype,"gridName",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(A.prototype,"processTip",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(A.prototype,"playText",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(A.prototype,"gridsName",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(A.prototype,"ballsName",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(A.prototype,"step1_ui",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(A.prototype,"step2_ui",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(A.prototype,"mapGrid",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(A.prototype,"gameInit",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(A.prototype,"scoreNode",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(A.prototype,"leftUiPreview",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(A.prototype,"bottomUi",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=A))||k));a._RF.pop()}}}));

System.register("chunks:///_virtual/danmaku-websocket.min.js",["./cjs-loader.mjs"],(function(e,t){var n;return{setters:[function(e){n=e.default}],execute:function(){e("default",void 0);var i=e("__cjsMetaURL",t.meta.url);n.define(i,(function(t,n,i,o,r){var a,s;a="undefined"!=typeof self?self:this,s=function(){return function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){t.a={WS_OP_HEARTBEAT:2,WS_OP_HEARTBEAT_REPLY:3,WS_OP_MESSAGE:5,WS_OP_USER_AUTHENTICATION:7,WS_OP_CONNECT_SUCCESS:8,WS_PACKAGE_HEADER_TOTAL_LENGTH:16,WS_PACKAGE_OFFSET:0,WS_HEADER_OFFSET:4,WS_VERSION_OFFSET:6,WS_OPERATION_OFFSET:8,WS_SEQUENCE_OFFSET:12,WS_BODY_PROTOCOL_VERSION_NORMAL:0,WS_BODY_PROTOCOL_VERSION_DEFLATE:2,WS_HEADER_DEFAULT_VERSION:1,WS_HEADER_DEFAULT_OPERATION:1,WS_HEADER_DEFAULT_SEQUENCE:1,WS_AUTH_OK:0,WS_AUTH_TOKEN_ERROR:-101}},function(e,t,n){var i=n(2).default;e.exports=i},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"development"===e.CONFIG.bundleType&&(console.clear(),console.dir(e.CONFIG)),this.initialize(t)}return e.prototype.initialize=function(t){return"development"===e.CONFIG.bundleType&&console.log("App Initialized."),this.ws=new i.a(t),this.getReturn()},e.prototype.getReturn=function(){return"development"===e.CONFIG.bundleType?this:{destroy:this.destroy.bind(this),send:this.send.bind(this),getAuthInfo:this.getAuthInfo.bind(this),getRetryCount:this.getRetryCount.bind(this)}},e.prototype.destroy=function(){this.ws&&this.ws.destroy()},e.prototype.send=function(e){this.ws&&this.ws.send(e)},e.prototype.getAuthInfo=function(){return this.ws&&this.ws.getAuthInfo()},e.prototype.getRetryCount=function(){return this.ws&&this.ws.getRetryCount()},o(e,null,[{key:"CONFIG",get:function(){return{version:"1.4.3",gitHash:"bf68b6a8",build:"32",bundleType:"release"}}}]),e}();t.default=r},function(e,t,n){var i=n(0),o=n(4),r=n(5),a=n(6).inflate,s=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.checkOptions(t)){var n={url:"",urlList:[],rid:0,aid:0,uid:0,from:-1,retry:!0,retryMaxCount:0,retryInterval:5,retryThreadCount:10,connectTimeout:5e3,retryConnectCount:3,retryconnectTimeout:1e4,retryRoundInterval:Math.floor(2*Math.random())+3,customAuthParam:[],fallback:function(){},heartBeatInterval:30,onReceivedMessage:function(){},onReceiveAuthRes:function(){},onHeartBeatReply:function(){},onInitialized:function(){},onOpen:function(){},onClose:function(){},onError:function(){},onListConnectError:function(){}};this.options=r.a.extend({},n,t),this.wsBinaryHeaderList=r.a.extend([],o.a),this.authInfo={origin:"",encode:""},0!==this.options.urlList.length&&0!==this.options.retryMaxCount&&this.options.retryMaxCount<this.options.urlList.length&&(this.options.retryMaxCount=this.options.urlList.length-1),this.state={retryCount:0,listConnectFinishedCount:0,index:0,connectTimeoutTimes:0},this.callbackQueueList={onInitializedQueue:[],onOpenQueue:[],onCloseQueue:[],onErrorQueue:[],onReceivedMessageQueue:[],onHeartBeatReplyQueue:[],onRetryFallbackQueue:[],onListConnectErrorQueue:[],onReceiveAuthResQueue:[]},this.HEART_BEAT_INTERVAL=0,this.CONNECT_TIMEOUT=0,this.mixinCallback().initialize(this.options.urlList.length>0?this.options.urlList[0]:this.options.url)}}return e.prototype.initialize=function(e){var t=this,n="MozWebSocket"in window?window.MozWebSocket:window.WebSocket,i=this.options;try{this.ws=new n(e),this.ws.binaryType="arraybuffer",this.ws.onopen=this.onOpen.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onclose=this.onClose.bind(this),this.ws.onerror=this.onError.bind(this),r.a.callFunction(this.callbackQueueList.onInitializedQueue),this.callbackQueueList.onInitializedQueue=[];var o=this.state.connectTimeoutTimes>=3?i.retryconnectTimeout:i.connectTimeout;this.CONNECT_TIMEOUT=setTimeout((function(){t.state.connectTimeoutTimes+=1,console.error("connect timeout ",t.state.connectTimeoutTimes),t.ws.close()}),o)}catch(e){"function"==typeof i.fallback&&i.fallback()}return this},e.prototype.onOpen=function(){return r.a.callFunction(this.callbackQueueList.onOpenQueue),this.state.connectTimeoutTimes=0,this.CONNECT_TIMEOUT&&clearTimeout(this.CONNECT_TIMEOUT),this.userAuthentication(),this},e.prototype.userAuthentication=function(){var e,t=this,n=this.options,o={uid:parseInt(n.uid,10),roomid:parseInt(n.rid,10),protover:parseInt(n.protover,10)||i.a.WS_BODY_PROTOCOL_VERSION_NORMAL};n.aid&&(o.aid=parseInt(n.aid,10)),n.from>0&&(o.from=parseInt(n.from,10)||7);for(var r=0;r<n.customAuthParam.length;r++){var a=n.customAuthParam[r],s=a.type||"string";switch(void 0!==o[a.key]&&console.error("Token has the same key already! 【"+a.key+"】"),a.key.toString()&&a.value.toString()||console.error("Invalid customAuthParam, missing key or value! 【"+a.key+"】-【"+a.value+"】"),s){case"string":o[a.key]=a.value;break;case"number":o[a.key]=parseInt(a.value,10);break;case"boolean":o[a.key]=!!o[a.value];break;default:return void console.error("Unsupported customAuthParam type!【"+s+"】")}}e=this.convertToArrayBuffer(JSON.stringify(o),i.a.WS_OP_USER_AUTHENTICATION),this.authInfo.origin=o,this.authInfo.encode=e,setTimeout((function(){t.ws.send(e)}),0)},e.prototype.getAuthInfo=function(){return this.authInfo},e.prototype.heartBeat=function(){var e=this;clearTimeout(this.HEART_BEAT_INTERVAL);var t=this.convertToArrayBuffer({},i.a.WS_OP_HEARTBEAT);this.ws.send(t),this.HEART_BEAT_INTERVAL=setTimeout((function(){e.heartBeat()}),1e3*this.options.heartBeatInterval)},e.prototype.onMessage=function(e){var t=this;try{var n=this.convertToObject(e.data);if(n instanceof Array)n.forEach((function(e){t.onMessage(e)}));else if(n instanceof Object)switch(n.op){case i.a.WS_OP_HEARTBEAT_REPLY:this.onHeartBeatReply(n.body);break;case i.a.WS_OP_MESSAGE:this.onMessageReply(n.body,n.seq);break;case i.a.WS_OP_CONNECT_SUCCESS:if(0!==n.body.length&&n.body[0])switch(n.body[0].code){case i.a.WS_AUTH_OK:this.heartBeat();break;case i.a.WS_AUTH_TOKEN_ERROR:this.options.retry=!1,"function"==typeof this.options.onReceiveAuthRes&&this.options.onReceiveAuthRes(n.body);break;default:this.onClose()}else this.heartBeat()}}catch(e){console.error("WebSocket Error: ",e)}return this},e.prototype.onMessageReply=function(e,t){var n=this;try{e instanceof Array?e.forEach((function(e){n.onMessageReply(e,t)})):e instanceof Object&&"function"==typeof this.options.onReceivedMessage&&this.options.onReceivedMessage(e,t)}catch(e){console.error("On Message Resolve Error: ",e)}},e.prototype.onHeartBeatReply=function(e){r.a.callFunction(this.callbackQueueList.onHeartBeatReplyQueue,e)},e.prototype.onClose=function(){var e=this,t=this.options.urlList.length;return r.a.callFunction(this.callbackQueueList.onCloseQueue),clearTimeout(this.HEART_BEAT_INTERVAL),this.options.retry?(this.checkRetryState()?setTimeout((function(){console.error("Danmaku Websocket Retry .",e.state.retryCount),e.state.index+=1,0===t||e.state.retryCount>e.options.retryThreadCount?setTimeout((function(){e.initialize(e.options.url)}),1e3*e.options.retryRoundInterval):0!==t&&e.state.index>t-1?(e.state.index=0,e.state.listConnectFinishedCount+=1,1===e.state.listConnectFinishedCount&&r.a.callFunction(e.callbackQueueList.onListConnectErrorQueue),setTimeout((function(){e.initialize(e.options.urlList[e.state.index])}),1e3*e.options.retryRoundInterval)):e.initialize(e.options.urlList[e.state.index])}),1e3*this.options.retryInterval):(console.error("Danmaku Websocket Retry Failed."),r.a.callFunction(this.callbackQueueList.onRetryFallbackQueue)),this):this},e.prototype.onError=function(e){return console.error("Danmaku Websocket On Error.",e),r.a.callFunction(this.callbackQueueList.onErrorQueue,e),this},e.prototype.destroy=function(){this.HEART_BEAT_INTERVAL&&clearTimeout(this.HEART_BEAT_INTERVAL),this.CONNECT_TIMEOUT&&clearTimeout(this.CONNECT_TIMEOUT),this.options.retry=!1,this.ws&&this.ws.close(),this.ws=null},e.prototype.convertToArrayBuffer=function(e,t){this.encoder||(this.encoder=r.a.getEncoder());var n=new ArrayBuffer(i.a.WS_PACKAGE_HEADER_TOTAL_LENGTH),o=new DataView(n,i.a.WS_PACKAGE_OFFSET),a=this.encoder.encode(e);return o.setInt32(i.a.WS_PACKAGE_OFFSET,i.a.WS_PACKAGE_HEADER_TOTAL_LENGTH+a.byteLength),this.wsBinaryHeaderList[2].value=t,this.wsBinaryHeaderList.forEach((function(e){4===e.bytes?o.setInt32(e.offset,e.value):2===e.bytes&&o.setInt16(e.offset,e.value)})),r.a.mergeArrayBuffer(n,a)},e.prototype.convertToObject=function(e){var t=new DataView(e),n={body:[]};if(n.packetLen=t.getInt32(i.a.WS_PACKAGE_OFFSET),this.wsBinaryHeaderList.forEach((function(e){4===e.bytes?n[e.key]=t.getInt32(e.offset):2===e.bytes&&(n[e.key]=t.getInt16(e.offset))})),n.packetLen<e.byteLength&&this.convertToObject(e.slice(0,n.packetLen)),this.decoder||(this.decoder=r.a.getDecoder()),!n.op||i.a.WS_OP_MESSAGE!==n.op&&n.op!==i.a.WS_OP_CONNECT_SUCCESS)n.op&&i.a.WS_OP_HEARTBEAT_REPLY===n.op&&(n.body={count:t.getInt32(i.a.WS_PACKAGE_HEADER_TOTAL_LENGTH)});else for(var o=i.a.WS_PACKAGE_OFFSET,s=n.packetLen,u="",c="";o<e.byteLength;o+=s){s=t.getInt32(o),u=t.getInt16(o+i.a.WS_HEADER_OFFSET);try{if(n.ver===i.a.WS_BODY_PROTOCOL_VERSION_DEFLATE){var l=e.slice(o+u,o+s),f=a(new Uint8Array(l));c=this.convertToObject(f.buffer).body}else{var h=this.decoder.decode(e.slice(o+u,o+s));c=0!==h.length?JSON.parse(h):null}c&&n.body.push(c)}catch(t){console.error("decode body error:",new Uint8Array(e),n,t)}}return n},e.prototype.send=function(e){this.ws&&this.ws.send(e)},e.prototype.addCallback=function(e,t){return"function"==typeof e&&t instanceof Array&&t.push(e),this},e.prototype.mixinCallback=function(){var e=this.options,t=this.callbackQueueList;return this.addCallback(e.onReceivedMessage,t.onReceivedMessageQueue).addCallback(e.onHeartBeatReply,t.onHeartBeatReplyQueue).addCallback(e.onInitialized,t.onInitializedQueue).addCallback(e.onOpen,t.onOpenQueue).addCallback(e.onClose,t.onCloseQueue).addCallback(e.onError,t.onErrorQueue).addCallback(e.onRetryFallback,t.onRetryFallbackQueue).addCallback(e.onListConnectError,t.onListConnectErrorQueue).addCallback(e.onReceiveAuthRes,t.onReceiveAuthResQueue),this},e.prototype.getRetryCount=function(){return this.state.retryCount},e.prototype.checkRetryState=function(){var e=this.options,t=!1;return(0===e.retryMaxCount||this.state.retryCount<e.retryMaxCount)&&(this.state.retryCount+=1,t=!0),t},e.checkOptions=function(e){return e||e instanceof Object?e.url?!!e.rid||(console.error("WebSocket Initialize options rid(cid) missing."),!1):(console.error("WebSocket Initialize options url missing."),!1):(console.error("WebSocket Initialize options missing or error.",e),!1)},e}();t.a=s},function(e,t,n){var i=n(0),o=[{name:"Header Length",key:"headerLen",bytes:2,offset:i.a.WS_HEADER_OFFSET,value:i.a.WS_PACKAGE_HEADER_TOTAL_LENGTH},{name:"Protocol Version",key:"ver",bytes:2,offset:i.a.WS_VERSION_OFFSET,value:i.a.WS_HEADER_DEFAULT_VERSION},{name:"Operation",key:"op",bytes:4,offset:i.a.WS_OPERATION_OFFSET,value:i.a.WS_HEADER_DEFAULT_OPERATION},{name:"Sequence Id",key:"seq",bytes:4,offset:i.a.WS_SEQUENCE_OFFSET,value:i.a.WS_HEADER_DEFAULT_SEQUENCE}];t.a=o},function(e,t,n){var i={getDecoder:function(){return window.TextDecoder?new window.TextDecoder:{decode:function(e){return decodeURIComponent(window.escape(String.fromCharCode.apply(String,new Uint8Array(e))))}}},getEncoder:function(){return window.TextEncoder?new window.TextEncoder:{encode:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0,o=e.length;i<o;i++)n[i]=e.charCodeAt(i);return t}}},mergeArrayBuffer:function(e,t){var n=new Uint8Array(e),i=new Uint8Array(t),o=new Uint8Array(n.byteLength+i.byteLength);return o.set(n,0),o.set(i,n.byteLength),o.buffer},callFunction:function(e,t){return e instanceof Array&&e.length?(e.forEach((function(e){return"function"==typeof e&&e(t)})),null):"function"==typeof e&&e(t)},extend:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var o=e||{};return o instanceof Object&&n.forEach((function(e){e instanceof Object&&Object.keys(e).forEach((function(t){o[t]=e[t]}))})),o}};t.a=i},function(e,t,n){e.exports=function e(t,n,i){function o(a,s){if(!n[a]){if(!t[a]){if(r)return r(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,(function(e){return o(t[a][1][e]||e)}),c,c.exports,e,t,n,i)}return n[a].exports}for(var r=!1,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t,n,i=Array.prototype.slice.call(arguments,1);i.length;){var o=i.shift();if(o){if("object"!=typeof o)throw new TypeError(o+"must be non-object");for(var r in o)t=o,n=r,Object.prototype.hasOwnProperty.call(t,n)&&(e[r]=o[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var o={arraySet:function(e,t,n,i,o){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+i),o);else for(var r=0;r<i;r++)e[o+r]=t[n+r]},flattenChunks:function(e){var t,n,i,o,r,a;for(t=i=0,n=e.length;t<n;t++)i+=e[t].length;for(a=new Uint8Array(i),t=o=0,n=e.length;t<n;t++)r=e[t],a.set(r,o),o+=r.length;return a}},r={arraySet:function(e,t,n,i,o){for(var r=0;r<i;r++)e[o+r]=t[n+r]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,r))},n.setTyped(i)},{}],2:[function(e,t,n){function i(e,t){if(t<65534&&(e.subarray&&a||!e.subarray&&r))return String.fromCharCode.apply(null,o.shrinkBuf(e,t));for(var n="",i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n}var o=e("./common"),r=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new o.Buf8(256),u=0;u<256;u++)s[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;s[254]=s[254]=1,n.string2buf=function(e){var t,n,i,r,a,s=e.length,u=0;for(r=0;r<s;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),u+=n<128?1:n<2048?2:n<65536?3:4;for(t=new o.Buf8(u),r=a=0;a<u;r++)55296==(64512&(n=e.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=e.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),t[a++]=n<128?n:(t[a++]=n<2048?192|n>>>6:(t[a++]=n<65536?224|n>>>12:(t[a++]=240|n>>>18,128|n>>>12&63),128|n>>>6&63),128|63&n);return t},n.buf2binstring=function(e){return i(e,e.length)},n.binstring2buf=function(e){for(var t=new o.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,o,r,a,u=t||e.length,c=new Array(2*u);for(n=o=0;n<u;)if((r=e[n++])<128)c[o++]=r;else if(4<(a=s[r]))c[o++]=65533,n+=a-1;else{for(r&=2===a?31:3===a?15:7;1<a&&n<u;)r=r<<6|63&e[n++],a--;c[o++]=1<a?65533:r<65536?r:(r-=65536,c[o++]=55296|r>>10&1023,56320|1023&r)}return i(c,o)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+s[e[n]]>t?n:t}},{"./common":1}],3:[function(e,t,n){t.exports=function(e,t,n,i){for(var o=65535&e|0,r=e>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;r=r+(o=o+t[i++]|0)|0,--a;);o%=65521,r%=65521}return o|r<<16|0}},{}],4:[function(e,t,n){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(e,t,n){var i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,o){var r=i,a=o+n;e^=-1;for(var s=o;s<a;s++)e=e>>>8^r[255&(e^t[s])];return-1^e}},{}],6:[function(e,t,n){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],7:[function(e,t,n){t.exports=function(e,t){var n,i,o,r,a,s,u,c,l,f,h,d,b,_,p,y,m,k,w,E,g,v,T,A,S;n=e.state,i=e.next_in,A=e.input,o=i+(e.avail_in-5),r=e.next_out,S=e.output,a=r-(t-e.avail_out),s=r+(e.avail_out-257),u=n.dmax,c=n.wsize,l=n.whave,f=n.wnext,h=n.window,d=n.hold,b=n.bits,_=n.lencode,p=n.distcode,y=(1<<n.lenbits)-1,m=(1<<n.distbits)-1;e:do{b<15&&(d+=A[i++]<<b,b+=8,d+=A[i++]<<b,b+=8),k=_[d&y];t:for(;;){if(d>>>=w=k>>>24,b-=w,0==(w=k>>>16&255))S[r++]=65535&k;else{if(!(16&w)){if(0==(64&w)){k=_[(65535&k)+(d&(1<<w)-1)];continue t}if(32&w){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}E=65535&k,(w&=15)&&(b<w&&(d+=A[i++]<<b,b+=8),E+=d&(1<<w)-1,d>>>=w,b-=w),b<15&&(d+=A[i++]<<b,b+=8,d+=A[i++]<<b,b+=8),k=p[d&m];n:for(;;){if(d>>>=w=k>>>24,b-=w,!(16&(w=k>>>16&255))){if(0==(64&w)){k=p[(65535&k)+(d&(1<<w)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(g=65535&k,b<(w&=15)&&(d+=A[i++]<<b,(b+=8)<w&&(d+=A[i++]<<b,b+=8)),u<(g+=d&(1<<w)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(d>>>=w,b-=w,(w=r-a)<g){if(l<(w=g-w)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(T=h,(v=0)===f){if(v+=c-w,w<E){for(E-=w;S[r++]=h[v++],--w;);v=r-g,T=S}}else if(f<w){if(v+=c+f-w,(w-=f)<E){for(E-=w;S[r++]=h[v++],--w;);if(v=0,f<E){for(E-=w=f;S[r++]=h[v++],--w;);v=r-g,T=S}}}else if(v+=f-w,w<E){for(E-=w;S[r++]=h[v++],--w;);v=r-g,T=S}for(;2<E;)S[r++]=T[v++],S[r++]=T[v++],S[r++]=T[v++],E-=3;E&&(S[r++]=T[v++],1<E&&(S[r++]=T[v++]))}else{for(v=r-g;S[r++]=S[v++],S[r++]=S[v++],S[r++]=S[v++],2<(E-=3););E&&(S[r++]=S[v++],1<E&&(S[r++]=S[v++]))}break}}break}}while(i<o&&r<s);i-=E=b>>3,d&=(1<<(b-=E<<3))-1,e.next_in=i,e.next_out=r,e.avail_in=i<o?o-i+5:5-(i-o),e.avail_out=r<s?s-r+257:257-(r-s),n.hold=d,n.bits=b}},{}],8:[function(e,t,n){function i(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new d.Buf16(320),this.work=new d.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function r(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=g,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new d.Buf32(v),t.distcode=t.distdyn=new d.Buf32(T),t.sane=1,t.back=-1,w):E}function a(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,r(e)):E}function s(e,t){var n,i;return e&&e.state?(i=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?E:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,a(e))):E}function u(e,t){var n,i;return e?(i=new o,(e.state=i).window=null,(n=s(e,t))!==w&&(e.state=null),n):E}function c(e){if(A){var t;for(f=new d.Buf32(512),h=new d.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(y(m,e.lens,0,288,f,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;y(k,e.lens,0,32,h,0,e.work,{bits:5}),A=!1}e.lencode=f,e.lenbits=9,e.distcode=h,e.distbits=5}function l(e,t,n,i){var o,r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new d.Buf8(r.wsize)),i>=r.wsize?(d.arraySet(r.window,t,n-r.wsize,r.wsize,0),r.wnext=0,r.whave=r.wsize):(i<(o=r.wsize-r.wnext)&&(o=i),d.arraySet(r.window,t,n-i,o,r.wnext),(i-=o)?(d.arraySet(r.window,t,n-i,i,0),r.wnext=i,r.whave=r.wsize):(r.wnext+=o,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=o))),0}var f,h,d=e("../utils/common"),b=e("./adler32"),_=e("./crc32"),p=e("./inffast"),y=e("./inftrees"),m=1,k=2,w=0,E=-2,g=1,v=852,T=592,A=!0;n.inflateReset=a,n.inflateReset2=s,n.inflateResetKeep=r,n.inflateInit=function(e){return u(e,15)},n.inflateInit2=u,n.inflate=function(e,t){var n,o,r,a,s,u,f,h,v,T,A,S,O,R,C,x,I,L,N,B,F,H,D,U,W=0,z=new d.Buf8(4),P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return E;12===(n=e.state).mode&&(n.mode=13),s=e.next_out,r=e.output,f=e.avail_out,a=e.next_in,o=e.input,u=e.avail_in,h=n.hold,v=n.bits,T=u,A=f,H=w;e:for(;;)switch(n.mode){case g:if(0===n.wrap){n.mode=13;break}for(;v<16;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(2&n.wrap&&35615===h){z[n.check=0]=255&h,z[1]=h>>>8&255,n.check=_(n.check,z,2,0),v=h=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&h)){e.msg="unknown compression method",n.mode=30;break}if(v-=4,F=8+(15&(h>>>=4)),0===n.wbits)n.wbits=F;else if(F>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<F,e.adler=n.check=1,n.mode=512&h?10:12,v=h=0;break;case 2:for(;v<16;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(n.flags=h,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(z[0]=255&h,z[1]=h>>>8&255,n.check=_(n.check,z,2,0)),v=h=0,n.mode=3;case 3:for(;v<32;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}n.head&&(n.head.time=h),512&n.flags&&(z[0]=255&h,z[1]=h>>>8&255,z[2]=h>>>16&255,z[3]=h>>>24&255,n.check=_(n.check,z,4,0)),v=h=0,n.mode=4;case 4:for(;v<16;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(z[0]=255&h,z[1]=h>>>8&255,n.check=_(n.check,z,2,0)),v=h=0,n.mode=5;case 5:if(1024&n.flags){for(;v<16;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(z[0]=255&h,z[1]=h>>>8&255,n.check=_(n.check,z,2,0)),v=h=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(u<(S=n.length)&&(S=u),S&&(n.head&&(F=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),d.arraySet(n.head.extra,o,a,S,F)),512&n.flags&&(n.check=_(n.check,o,S,a)),u-=S,a+=S,n.length-=S),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===u)break e;for(S=0;F=o[a+S++],n.head&&F&&n.length<65536&&(n.head.name+=String.fromCharCode(F)),F&&S<u;);if(512&n.flags&&(n.check=_(n.check,o,S,a)),u-=S,a+=S,F)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===u)break e;for(S=0;F=o[a+S++],n.head&&F&&n.length<65536&&(n.head.comment+=String.fromCharCode(F)),F&&S<u;);if(512&n.flags&&(n.check=_(n.check,o,S,a)),u-=S,a+=S,F)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;v<16;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}v=h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;v<32;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}e.adler=n.check=i(h),v=h=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=s,e.avail_out=f,e.next_in=a,e.avail_in=u,n.hold=h,n.bits=v,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){h>>>=7&v,v-=7&v,n.mode=27;break}for(;v<3;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}switch(n.last=1&h,v-=1,3&(h>>>=1)){case 0:n.mode=14;break;case 1:if(c(n),n.mode=20,6!==t)break;h>>>=2,v-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}h>>>=2,v-=2;break;case 14:for(h>>>=7&v,v-=7&v;v<32;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&h,v=h=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(S=n.length){if(u<S&&(S=u),f<S&&(S=f),0===S)break e;d.arraySet(r,o,a,S,s),u-=S,a+=S,f-=S,s+=S,n.length-=S;break}n.mode=12;break;case 17:for(;v<14;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(n.nlen=257+(31&h),h>>>=5,v-=5,n.ndist=1+(31&h),h>>>=5,v-=5,n.ncode=4+(15&h),h>>>=4,v-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;v<3;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}n.lens[P[n.have++]]=7&h,h>>>=3,v-=3}for(;n.have<19;)n.lens[P[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,D={bits:n.lenbits},H=y(0,n.lens,0,19,n.lencode,0,n.work,D),n.lenbits=D.bits,H){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;x=(W=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,I=65535&W,!((C=W>>>24)<=v);){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(I<16)h>>>=C,v-=C,n.lens[n.have++]=I;else{if(16===I){for(U=C+2;v<U;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(h>>>=C,v-=C,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}F=n.lens[n.have-1],S=3+(3&h),h>>>=2,v-=2}else if(17===I){for(U=C+3;v<U;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}v-=C,F=0,S=3+(7&(h>>>=C)),h>>>=3,v-=3}else{for(U=C+7;v<U;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}v-=C,F=0,S=11+(127&(h>>>=C)),h>>>=7,v-=7}if(n.have+S>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;S--;)n.lens[n.have++]=F}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,D={bits:n.lenbits},H=y(m,n.lens,0,n.nlen,n.lencode,0,n.work,D),n.lenbits=D.bits,H){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,D={bits:n.distbits},H=y(k,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,D),n.distbits=D.bits,H){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=u&&258<=f){e.next_out=s,e.avail_out=f,e.next_in=a,e.avail_in=u,n.hold=h,n.bits=v,p(e,A),s=e.next_out,r=e.output,f=e.avail_out,a=e.next_in,o=e.input,u=e.avail_in,h=n.hold,v=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;x=(W=n.lencode[h&(1<<n.lenbits)-1])>>>16&255,I=65535&W,!((C=W>>>24)<=v);){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(x&&0==(240&x)){for(L=C,N=x,B=I;x=(W=n.lencode[B+((h&(1<<L+N)-1)>>L)])>>>16&255,I=65535&W,!(L+(C=W>>>24)<=v);){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}h>>>=L,v-=L,n.back+=L}if(h>>>=C,v-=C,n.back+=C,n.length=I,0===x){n.mode=26;break}if(32&x){n.back=-1,n.mode=12;break}if(64&x){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&x,n.mode=22;case 22:if(n.extra){for(U=n.extra;v<U;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,v-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;x=(W=n.distcode[h&(1<<n.distbits)-1])>>>16&255,I=65535&W,!((C=W>>>24)<=v);){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(0==(240&x)){for(L=C,N=x,B=I;x=(W=n.distcode[B+((h&(1<<L+N)-1)>>L)])>>>16&255,I=65535&W,!(L+(C=W>>>24)<=v);){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}h>>>=L,v-=L,n.back+=L}if(h>>>=C,v-=C,n.back+=C,64&x){e.msg="invalid distance code",n.mode=30;break}n.offset=I,n.extra=15&x,n.mode=24;case 24:if(n.extra){for(U=n.extra;v<U;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,v-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===f)break e;if(S=A-f,n.offset>S){if((S=n.offset-S)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}O=S>n.wnext?(S-=n.wnext,n.wsize-S):n.wnext-S,S>n.length&&(S=n.length),R=n.window}else R=r,O=s-n.offset,S=n.length;for(f<S&&(S=f),f-=S,n.length-=S;r[s++]=R[O++],--S;);0===n.length&&(n.mode=21);break;case 26:if(0===f)break e;r[s++]=n.length,f--,n.mode=21;break;case 27:if(n.wrap){for(;v<32;){if(0===u)break e;u--,h|=o[a++]<<v,v+=8}if(A-=f,e.total_out+=A,n.total+=A,A&&(e.adler=n.check=n.flags?_(n.check,r,A,s-A):b(n.check,r,A,s-A)),A=f,(n.flags?h:i(h))!==n.check){e.msg="incorrect data check",n.mode=30;break}v=h=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;v<32;){if(0===u)break e;u--,h+=o[a++]<<v,v+=8}if(h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}v=h=0}n.mode=29;case 29:H=1;break e;case 30:H=-3;break e;case 31:return-4;case 32:default:return E}return e.next_out=s,e.avail_out=f,e.next_in=a,e.avail_in=u,n.hold=h,n.bits=v,(n.wsize||A!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&l(e,e.output,e.next_out,A-e.avail_out)?(n.mode=31,-4):(T-=e.avail_in,A-=e.avail_out,e.total_in+=T,e.total_out+=A,n.total+=A,n.wrap&&A&&(e.adler=n.check=n.flags?_(n.check,r,A,e.next_out-A):b(n.check,r,A,e.next_out-A)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0===T&&0===A||4===t)&&H===w&&(H=-5),H)},n.inflateEnd=function(e){if(!e||!e.state)return E;var t=e.state;return t.window&&(t.window=null),e.state=null,w},n.inflateGetHeader=function(e,t){var n;return e&&e.state?0==(2&(n=e.state).wrap)?E:((n.head=t).done=!1,w):E},n.inflateSetDictionary=function(e,t){var n,i=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?E:11===n.mode&&b(1,t,i,0)!==n.check?-3:l(e,t,i,i)?(n.mode=31,-4):(n.havedict=1,w):E},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(e,t,n){var i=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,u,c,l,f,h){var d,b,_,p,y,m,k,w,E,g=h.bits,v=0,T=0,A=0,S=0,O=0,R=0,C=0,x=0,I=0,L=0,N=null,B=0,F=new i.Buf16(16),H=new i.Buf16(16),D=null,U=0;for(v=0;v<=15;v++)F[v]=0;for(T=0;T<u;T++)F[t[n+T]]++;for(O=g,S=15;1<=S&&0===F[S];S--);if(S<O&&(O=S),0===S)return c[l++]=20971520,c[l++]=20971520,h.bits=1,0;for(A=1;A<S&&0===F[A];A++);for(O<A&&(O=A),v=x=1;v<=15;v++)if(x<<=1,(x-=F[v])<0)return-1;if(0<x&&(0===e||1!==S))return-1;for(H[1]=0,v=1;v<15;v++)H[v+1]=H[v]+F[v];for(T=0;T<u;T++)0!==t[n+T]&&(f[H[t[n+T]]++]=T);if(m=0===e?(N=D=f,19):1===e?(N=o,B-=257,D=r,U-=257,256):(N=a,D=s,-1),v=A,y=l,C=T=L=0,_=-1,p=(I=1<<(R=O))-1,1===e&&852<I||2===e&&592<I)return 1;for(;;){for(k=v-C,E=f[T]<m?(w=0,f[T]):f[T]>m?(w=D[U+f[T]],N[B+f[T]]):(w=96,0),d=1<<v-C,A=b=1<<R;c[y+(L>>C)+(b-=d)]=k<<24|w<<16|E|0,0!==b;);for(d=1<<v-1;L&d;)d>>=1;if(0!==d?(L&=d-1,L+=d):L=0,T++,0==--F[v]){if(v===S)break;v=t[n+f[T]]}if(O<v&&(L&p)!==_){for(0===C&&(C=O),y+=A,x=1<<(R=v-C);R+C<S&&!((x-=F[R+C])<=0);)R++,x<<=1;if(I+=1<<R,1===e&&852<I||2===e&&592<I)return 1;c[_=L&p]=O<<24|R<<16|y-l|0}}return 0!==L&&(c[y+L]=v-C<<24|64<<16|0),h.bits=O,0}},{"../utils/common":1}],10:[function(e,t,n){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(e,t,n){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],"/lib/inflate.js":[function(e,t,n){function i(e){if(!(this instanceof i))return new i(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==u.Z_OK)throw new Error(c[n]);if(this.header=new f,r.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=s.string2buf(t.dictionary):"[object ArrayBuffer]"===h.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=r.inflateSetDictionary(this.strm,t.dictionary))!==u.Z_OK))throw new Error(c[n])}function o(e,t){var n=new i(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}var r=e("./zlib/inflate"),a=e("./utils/common"),s=e("./utils/strings"),u=e("./zlib/constants"),c=e("./zlib/messages"),l=e("./zlib/zstream"),f=e("./zlib/gzheader"),h=Object.prototype.toString;i.prototype.push=function(e,t){var n,i,o,c,l,f=this.strm,d=this.options.chunkSize,b=this.options.dictionary,_=!1;if(this.ended)return!1;i=t===~~t?t:!0===t?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof e?f.input=s.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new a.Buf8(d),f.next_out=0,f.avail_out=d),(n=r.inflate(f,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&b&&(n=r.inflateSetDictionary(this.strm,b)),n===u.Z_BUF_ERROR&&!0===_&&(n=u.Z_OK,_=!1),n!==u.Z_STREAM_END&&n!==u.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==u.Z_STREAM_END&&(0!==f.avail_in||i!==u.Z_FINISH&&i!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(o=s.utf8border(f.output,f.next_out),c=f.next_out-o,l=s.buf2string(f.output,o),f.next_out=c,f.avail_out=d-c,c&&a.arraySet(f.output,f.output,o,c,0),this.onData(l)):this.onData(a.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(_=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==u.Z_STREAM_END);return n===u.Z_STREAM_END&&(i=u.Z_FINISH),i===u.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u.Z_OK):i!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(f.avail_out=0))},i.prototype.onData=function(e){this.chunks.push(e)},i.prototype.onEnd=function(e){e===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=i,n.inflate=o,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,o(e,t)},n.ungzip=o},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")}])},"object"==typeof t&&"object"==typeof i?i.exports=s():"function"==typeof define&&define.amd?define([],s):"object"==typeof t?t.DanmakuWebSocket=s():a.DanmakuWebSocket=s(),e("default",i.exports),i.exports.DanmakuWebSocket}),{})}}}));

System.register("chunks:///_virtual/danmaku-websocket.min.mjs_cjs=&original=.js",["./danmaku-websocket.min.js","./cjs-loader.mjs"],(function(e,t){var a,n;return{setters:[function(t){a=t.__cjsMetaURL;var n={};n.__cjsMetaURL=t.__cjsMetaURL,n.default=t.default,e(n)},function(e){n=e.default}],execute:function(){a||n.throwInvalidWrapper("./danmaku-websocket.min.js",t.meta.url),n.require(a)}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Canvas,g=t.UITransform,h=t.instantiate,p=t.Label,c=t.Color,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[c.WHITE,c.BLACK,c.RED,c.GREEN,c.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(a)){var t=this.node.parent.getComponent(g),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=h(s);l.parent=this.node,l.name="Buttons";var r=h(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=h(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(p);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=c.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?h(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(p);this.labelComponentList[this.labelComponentList.length]=S;var x=h(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(p)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=h(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(p)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=h(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?h(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/dmDataStruct.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"05d11u/XMJBOY9VcPmlJ1Yl","dmDataStruct",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/doorTrigger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./canvas.ts","./gameInit.ts"],(function(e){var t,n,r,i,o,a,l,c,s,u,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Node,c=e.BoxCollider,s=e.Component},function(e){u=e.canvas},function(e){g=e.gameInit}],execute:function(){var p,f,m,y,d,h,v,b,T;o._RF.push({},"abf99WSWWRON4WHoIcP4CaE","doorTrigger",void 0);var I=a.ccclass,C=a.property;e("doorTrigger",(p=I("doorTrigger"),f=C({type:String}),m=C({type:l}),y=C({type:l}),p((v=t((h=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"teamName",v,i(t)),r(t,"canvas2D",b,i(t)),r(t,"gameInit",T,i(t)),t}n(t,e);var o=t.prototype;return o.start=function(){this.node.getComponent(c).on("onTriggerEnter",this.onTriggerEnter,this)},o.onTriggerEnter=function(e){console.log("onTriggerEnter---进球！"),this.gameInit.getComponent(g).staticAllBall(),this.canvas2D.getComponent(u).goalBallStep(this.teamName)},o.update=function(e){},t}(s)).prototype,"teamName",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=t(h.prototype,"canvas2D",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(h.prototype,"gameInit",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=h))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/dwebXhr.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"aba9fgw33FP043sZu81lImo","dwebXhr",void 0);e("default",{hostUrl:"https://blive-deskft.dweb.club",sendAjax:function(e,t,n,s){console.log("----开始请求----");var r=new XMLHttpRequest;if(r.open(t,e),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s){var o=this.serialize(s);r.send(o)}else r.send();r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){console.log("----请求成功----:"+r.responseText);var e=JSON.parse(r.responseText);n(e)}}},serialize:function(e){var t="";for(var n in e)t+=n+"="+e[n]+"&";return t.substring(0,t.length-1)}});t._RF.pop()}}}));

System.register("chunks:///_virtual/gameInit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dwebXhr.ts","./index.ts","./canvas.ts","./testEventTrigger.ts","./PlayerPool.ts","./ballItemMatMnger.ts","./CameraMnger.ts"],(function(e){var t,a,n,i,o,l,r,s,c,u,m,d,g,p,_,f,h,b,y,v,w,C;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,r=e.Node,s=e.Label,c=e.RigidBody,u=e.instantiate,m=e.EventHandler,d=e.UICoordinateTracker,g=e.Vec2,p=e.Component},function(e){_=e.default},function(e){f=e.createSocket,h=e.destroySocket},function(e){b=e.canvas},function(e){y=e.testEventTrigger},function(e){v=e.PlayerPool},function(e){w=e.ballItemMatMnger},function(e){C=e.CameraMnger}],execute:function(){var P,N,I,B,k,G,D,A,E,M,S,x,z,U,T,V,L,O,H,j,F;o._RF.push({},"ab919EkPXZDN4WFlHSNVayz","gameInit",void 0);var R=l.ccclass,J=l.property;e("gameInit",(P=R("gameInit"),N=J({type:r}),I=J({type:r}),B=J({type:r}),k=J({type:r}),G=J({type:r}),D=J({type:r}),A=J({type:r}),E=J({type:r}),M=J({type:r}),P((z=t((x=function(e){function t(){for(var t,a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(t=e.call.apply(e,[this].concat(o))||this).map_origin=new g(2.5,2.5),t.grid_scale=5,t.gird_rows=8,t.grid_columns=6,n(t,"grid_item",z,i(t)),t.mapGrid=null,n(t,"ball_team1",U,i(t)),n(t,"ball_team2",T,i(t)),n(t,"canvas2D",V,i(t)),n(t,"editBox",L,i(t)),t.ball_origin=new g(5,5),t.ball_grid_scale=5,t.ball_grid_rows=7,t.ball_grid_columns=5,t.ball_init_posArr=[new g(3,2),new g(1,2),new g(4,1),new g(2,1),new g(0,1),new g(1,4),new g(3,4),new g(0,5),new g(2,5),new g(4,5)],t.ballTeam1=[],t.ballTeam2=[],t.game_id=void 0,t.websocket_info=void 0,t.anchor_info=void 0,t.dwebWs=null,t.hostUrl="https://blive-deskft.dweb.club/",t.autoPlay_type=!1,t.autoPlay=0,n(t,"timeUiNode",O,i(t)),t.timeNum=20,t.playerPool=new v,n(t,"GameCamera",H,i(t)),n(t,"PreviewCamera",j,i(t)),n(t,"gameStartBtn",F,i(t)),t.cameraMnger=null,t.onMessageCallBack=function(e){console.log(e);var a=t.canvas2D.getComponent(b).gameProcess.stepIdx;if("LIVE_OPEN_PLATFORM_DM"==e.cmd){console.log("收到弹幕");var n=e.data,i=n.msg;if(console.log(i),console.log(a),"入场"==i&&t.playerPool.addPlayer(n),2==a){if(t.playerPool.PlayerList.filter((function(e){if(e.uid==n.uid)return e})).length>0){var o={uid:n.uid,msg:i};t.playerPool.playerMoveBallVote(o,t.canvas2D)}t.editBox.getComponent(y).scriptInputValue(i),t.canvas2D.getComponent(b).gameStepVote(i)}if(3==a){if(t.playerPool.PlayerList.filter((function(e){if(e.uid==n.uid)return e})).length>0){var l={uid:n.uid,msg:i};t.playerPool.playerMoveBallVote(l,t.canvas2D)}t.editBox.getComponent(y).scriptInputValue(i),t.canvas2D.getComponent(b).gameStepVote(i)}}},t.handleCreateSocket=function(){if(t.websocket_info.auth_body&&t.websocket_info.wss_link)f(t.websocket_info.auth_body,t.websocket_info.wss_link,t.onMessageCallBack)},t.handleDestroySocket=function(){h(),console.log("-----长连接销毁成功-----")},t}a(t,e);var o=t.prototype;return o.start=function(){this.mapGrid=this.node.getParent().getChildByName("mapGrid"),this.cameraMnger=new C({canvas2D:this.canvas2D,GameCamera:this.GameCamera,PreviewCamera:this.PreviewCamera}),this.ballInit(),this.playerPool.mapGrid=this.mapGrid},o.releaseGameStart=function(){console.log("游戏开始"),this.editBox.getComponent(y).scriptInputValue("开始"),this.canvas2D.getComponent(b).gamePushOn(),this.startAutoLoopGame(),this.gameStartBtn.active=!1,this.autoPlay_type=!0},o.startAutoLoopGame=function(){var e=this;this.timeUiNode.active=!0,this.timeUiNode.getChildByName("number").getComponent(s).string=this.timeNum+"",this.autoPlay=setInterval((function(){if(e.timeNum-=1,e.timeUiNode.getChildByName("number").getComponent(s).string=e.timeNum+"",0==e.timeNum){e.canvas2D.getComponent(b).gamePushOn();var t=e.canvas2D.getComponent(b).gameProcess.stepIdx;console.log("----自动---",t),1==t&&(e.timeNum=5,e.cancelAutoPlay(),e.timeUiNode.active=!1),0==t&&(e.timeNum=5,e.cancelAutoPlay(),e.timeUiNode.active=!1),2!=t&&3!=t||(e.timeNum=40)}}),1e3)},o.cancelAutoPlay=function(){clearInterval(this.autoPlay)},o.getBliveData=function(){var e=this;_.sendAjax(this.hostUrl+"/live-Auth","GET",(function(t){console.log(JSON.parse(t));var a=JSON.parse(t);a.data?(e.game_id=a.data.game_info.game_id,e.websocket_info=a.data.websocket_info,e.anchor_info=a.data.anchor_info,e.handleCreateSocket()):(console.log("获取数据失败 -- 获取服务端缓存"),_.sendAjax(e.hostUrl+"/try-again","GET",(function(t){console.log(t);var a=t;a.data&&(e.game_id=a.data.game_info.game_id,e.websocket_info=a.data.websocket_info,e.anchor_info=a.data.anchor_info)})),e.handleCreateSocket()),e.loopHeartbeat()}))},o.loopHeartbeat=function(){var e=this;setInterval((function(){var t={game_id:e.game_id};_.sendAjax(e.hostUrl+"/loop-heart/","POST",(function(e){console.log("心跳返回"),console.log(e)}),t)}),2e4)},o.ballInit=function(){var e=this;console.log("ballInit",this.ball_init_posArr);for(var t=function(t){for(var a=function(a){e.ball_init_posArr.forEach((function(n,i){if(t==n.x&&a==n.y)if(i<5){var o=e.playerPool.getPlayerInfo(1,i+1);console.log("红色玩家信息========");var l=u(e.ball_team1);l.name="ball_1_"+i,l.active=!0,l.setPosition(e.ball_origin.x+t*e.ball_grid_scale,l.position.y,e.ball_origin.y+a*e.ball_grid_scale),e.mapGrid.addChild(l);var r=new m;r.target=l,r.component="ballItem",r.handler="uicoordinate",r.customEventData=l.name,l.getComponent(d).syncEvents.push(r),o.length>0&&l.getComponent(w).setAvatarMat(o[0])}else{var s=e.playerPool.getPlayerInfo(2,i-5+1);console.log("蓝队玩家信息========");var c=u(e.ball_team2);c.name="ball_2_"+(i-5),c.active=!0,c.setPosition(e.ball_origin.x+t*e.ball_grid_scale,c.position.y,e.ball_origin.y+a*e.ball_grid_scale),e.mapGrid.addChild(c);var g=new m;g.target=c,g.component="ballItem",g.handler="uicoordinate",g.customEventData=c.name,c.getComponent(d).syncEvents.push(g),s.length>0&&c.getComponent(w).setAvatarMat(s[0])}}))},n=0;n<e.ball_grid_rows;n++)a(n)},a=0;a<this.ball_grid_columns;a++)t(a)},o.staticAllBall=function(){var e=this;this.ball_init_posArr.forEach((function(t,a){a<5?e.mapGrid.getChildByName("ball_1_"+a).getComponent(c).type=2:e.mapGrid.getChildByName("ball_2_"+(a-5)).getComponent(c).type=2}))},o.deleteAllBall=function(){var e=this;this.ball_init_posArr.forEach((function(t,a){a<5?e.mapGrid.getChildByName("ball_1_"+a).destroy():e.mapGrid.getChildByName("ball_2_"+(a-5)).destroy()}))},o.reInit=function(){this.deleteAllBall(),this.ballInit()},o.groundInit=function(){for(var e=0;e<this.grid_columns;e++)for(var t=0;t<this.gird_rows;t++){var a=u(this.grid_item);a.name="grid_"+e+"_"+t,a.active=!0,a.setPosition(this.map_origin.x+e*this.grid_scale,a.position.y,this.map_origin.y+t*this.grid_scale),this.mapGrid.addChild(a);var n=new m;n.target=a,n.component="gridItem",n.handler="uicoordinate",n.customEventData=a.name,a.getComponent(d).syncEvents.push(n)}},o.hideGround=function(){for(var e=0;e<this.grid_columns;e++)for(var t=0;t<this.gird_rows;t++){this.mapGrid.getChildByName("grid_"+e+"_"+t).destroy()}},o.update=function(e){},t}(p)).prototype,"grid_item",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(x.prototype,"ball_team1",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(x.prototype,"ball_team2",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(x.prototype,"canvas2D",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(x.prototype,"editBox",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(x.prototype,"timeUiNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(x.prototype,"GameCamera",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(x.prototype,"PreviewCamera",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(x.prototype,"gameStartBtn",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=x))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/gameProcess.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"fa32atGyK1DMIyszCVUwPJz","gameProcess",void 0);var r=[{stepIdx:0,tipStr:"等待游戏开始",title:"等待开始"},{stepIdx:1,tipStr:"1. 请输入:颜色-编号,\n如：红色-1",title:"选球阶段"},{stepIdx:2,tipStr:"2. 请输入:颜色-坐标-力度\n如：红色-a1-100",title:"弹射参数投票阶段"},{stepIdx:3,tipStr:"4. 等待运动结束进入下一回合",title:"弹射阶段"}];t("GameProcess",function(){function t(){this.stepList=r,this.stepIdx=0,this.score=void 0,this.score={red:0,blue:0}}var e=t.prototype;return e.goalBall=function(t){"red"==t?this.score.blue+=1:this.score.red+=1},e.nextRound=function(){this.stepIdx=0;var t={restart:!1,victory:""};return 3==this.score.red&&(t.restart=!0,t.victory="red"),3==this.score.blue&&(t.restart=!0,t.victory="blue"),t},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/gridItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./canvas.ts"],(function(t){var e,n,r,i,a,o,c,u,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,c=t.Node,u=t.Component},function(t){s=t.canvas}],execute:function(){var p,l,d,f,v;a._RF.push({},"c91890YqMZLFphv6MGQWuA9","gridItem",void 0);var g=o.ccclass,y=o.property;t("gridItem",(p=g("gridItem"),l=y({type:c}),p((v=e((f=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,r(e,"canvas2D",v,i(e)),e}n(e,t);var a=e.prototype;return a.start=function(){},a.uicoordinate=function(t,e,n){this.canvas2D.getComponent(s).drawMapGridNumber2D(t,e,n)},a.update=function(t){},e}(u)).prototype,"canvas2D",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=f))||d));a._RF.pop()}}}));

System.register("chunks:///_virtual/IDcodeInput.ts",["./rollupPluginModLoBabelHelpers.js","cc","./dwebXhr.ts","./gameInit.ts","./canvas.ts"],(function(e){var t,n,o,i,r,a,c,l,s,p,g,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Node,l=e.Label,s=e.Component},function(e){p=e.default},function(e){g=e.gameInit},function(e){u=e.canvas}],execute:function(){var m,d,f,h,b,I,v,y,C,S,T,_,w;r._RF.push({},"acb0dpMHAVHHIb2Cu3AL7Q9","IDcodeInput",void 0);var N=a.ccclass,A=a.property;e("IDcodeInput",(m=N("IDcodeInput"),d=A({type:c}),f=A({type:c}),h=A({type:c}),b=A({type:c}),I=A({type:String}),m((C=t((y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"conectTip",C,i(t)),o(t,"progressBar",S,i(t)),o(t,"toElectronNode",T,i(t)),o(t,"gameInit",_,i(t)),o(t,"hostUrl",w,i(t)),t.conectTipTimer=0,t.conectTipString="连接中",t.conectIng=!0,t}n(t,e);var r=t.prototype;return r.start=function(){},r.submitBtnClick=function(){var e=this;if(console.log("------submitBtnClick"),this.conectIng){console.log("------开始重连"),this.conectIng=!1,this.conectTipStringAnime();var t=JSON.parse(localStorage.getItem("bliveRoom"));console.log(this.hostUrl),console.log(t),p.sendAjax(this.hostUrl+"/live-Auth/","POST",(function(t){console.log(JSON.parse(t)),7002==(t=JSON.parse(t)).code&&(console.log("-----房间重复"),e.conectTipString="冷却中",alert("房间重复,请重试"),e.endGameRoom()),0==t.code&&e.enterGame(t)}),{code:t.code,room_id:t.room_id})}else console.log("---正在连接--无可操作")},r.conectTipStringAnime=function(){var e=this,t=0;this.conectTipTimer=setInterval((function(){e.conectTip.getChildByName("Label").getComponent(l).string=e.conectTipString+"..."+t++,t>10&&(e.conectIng=!0,e.conectTip.getChildByName("Label").getComponent(l).string="点击重试",clearInterval(e.conectTipTimer))}),1e3)},r.enterGame=function(e){this.gameInit.getComponent(g).game_id=e.data.game_info.game_id,this.gameInit.getComponent(g).websocket_info=e.data.websocket_info,this.gameInit.getComponent(g).anchor_info=e.data.anchor_info,this.gameInit.getComponent(g).handleCreateSocket(),this.gameInit.getComponent(g).cameraMnger.setFirstCamera("game"),this.gameInit.getComponent(g).loopHeartbeat(),this.gameInit.getComponent(g).canvas2D.getComponent(u).releaseStart(),this.node.getParent().active=!1},r.endGameRoom=function(){var e=JSON.parse(localStorage.getItem("bliveRoom"));p.sendAjax(this.hostUrl+"/game-end/","POST",(function(e){console.log(JSON.parse(e))}),{code:e.code,room_id:e.room_id})},r.reloadAllWindow=function(){this.endGameRoom(),window.location.reload()},r.update=function(e){},t}(s)).prototype,"conectTip",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(y.prototype,"progressBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(y.prototype,"toElectronNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(y.prototype,"gameInit",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(y.prototype,"hostUrl",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=y))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["./rollupPluginModLoBabelHelpers.js","cc","./danmaku-websocket.min.mjs_cjs=&original=.js","./danmaku-websocket.min.js"],(function(e){var o,n,t;return{setters:[function(e){o=e.extends},function(e){n=e.cclegacy},null,function(e){t=e.default}],execute:function(){var r;function u(e,o){var n=o[0],t=o,r=JSON.parse(e);return{url:n,urlList:t,customAuthParam:[{key:"key",value:r.key,type:"string"},{key:"group",value:r.group,type:"string"}],rid:r.roomid,protover:r.protoover,uid:r.uid}}function c(){console.log("destroy1"),r&&r.destroy(),r=void 0,console.log("destroy2")}e({createSocket:function(e,n,i){var s=o({},u(e,n),{onReceivedMessage:i,onHeartBeatReply:function(e){console.log("收到心跳处理回调:",e)},onError:function(e){return console.log("error",e)},onListConnectError:function(){console.log("list connect error"),c()}});r||(r=new t(s));return r},destroySocket:c,getWebSocketConfig:u,getWsClient:function(){return r}}),n._RF.push({},"139e57mKQJKqqAv+CRkjNVy","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./CameraMnger.ts","./PlayerPool.ts","./IDcodeInput.ts","./ballItem.ts","./ballItemMatMnger.ts","./canvas.ts","./doorTrigger.ts","./gameInit.ts","./gameProcess.ts","./gridItem.ts","./dwebXhr.ts","./startBLive.ts","./websocket.ts","./testBtnTrigger.ts","./testEventTrigger.ts","./testPhysics.ts","./toElectron.ts","./windowMsg.ts","./voteCatapult.ts","./voteSelectBall.ts","./danmaku-websocket.min.mjs_cjs=&original=.js","./dmDataStruct.ts","./index.ts","./debug-view-runtime-control.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PlayerPool.ts",["cc","./ballItemMatMnger.ts","./canvas.ts","./dwebXhr.ts"],(function(e){var t,l,o,r,a,i,n;return{setters:[function(e){t=e.cclegacy,l=e.RigidBody,o=e.tween,r=e.Vec3},function(e){a=e.ballItemMatMnger},function(e){i=e.canvas},function(e){n=e.default}],execute:function(){t._RF.push({},"c5600VtNGREdp2/pr8YZNI7","PlayerPool",void 0);e("PlayerPool",function(){function e(){this.PlayerList=[],this.mapGrid=null,this.hostUrl="https://blive-deskft.dweb.club",this.moveBallVoteList=[]}var t=e.prototype;return t.playerMoveBallVote=function(e,t){t.getComponent(i);if(-1!=e.msg.indexOf(" ")){var l=e.msg.split(" "),o=parseInt(l[0]),r=parseInt(l[1]);if(isNaN(Number(o))||isNaN(Number(r)))console.log("入场玩家参数输入类型不符合：int int");else if(o>360?o%=360:o<0&&(o=o%360+360),r<1||r>100)console.log("power不在1-100之间");else{var a=this.PlayerList.filter((function(t){return t.uid==e.uid}));console.log("=====player====="),console.log(a);var n=this.moveBallVoteList.filter((function(t){if(t.uid==e.uid)return t}));console.log(n),n.length>0?(n[0].ballName="ball_"+a[0].team+"_"+(a[0].memberNum-1),n[0].rotDeg=o,n[0].power=r):this.moveBallVoteList.push({uid:e.uid,ballName:"ball_"+a[0].team+"_"+(a[0].memberNum-1),rotDeg:o,power:r}),console.log(this.moveBallVoteList),this.playerBallRotate(a[0].team,a[0].memberNum-1,o)}}},t.playerBallRotate=function(e,t,a){var i="ball_"+e+"_"+t,n=this.mapGrid.getChildByName(i);n.setRotationFromEuler(0,0,0),n.getComponent(l).type=2;var s={x:n.eulerAngles.x,y:n.eulerAngles.y,z:n.eulerAngles.z};o(s).to(1,{x:0,y:n.eulerAngles.y+a,z:0},{onComplete:function(e){n.getComponent(l).type=1},onUpdate:function(e){n.setRotationFromEuler(new r(e.x,e.y,e.z))}}).start()},t.addPlayer=function(e){for(var t=this,l=0;l<this.PlayerList.length;l++)if(this.PlayerList[l].uid==e.uid)return;for(var o=0,r=0,a=0;a<this.PlayerList.length;a++)1==this.PlayerList[a].team?o++:r++;var i=o>r?2:1,s=1,u=this.PlayerList.filter((function(e){return e.team==i}));if(!(u.length>=5)){for(var m=0;m<5;m++){for(var c=!1,f=0;f<u.length;f++)if(u[f].memberNum==m+1){c=!0;break}if(!c){s=m+1;break}}var g={uid:e.uid,uname:e.uname,uface:e.uface,team:i,memberNum:s};console.log(g),this.PlayerList.push(g),n.sendAjax(this.hostUrl+"/get-img/?imgSrc="+g.uface,"GET",(function(e){console.log("get-img success"),console.log(e);var l=e.imgSrc;g.uface=t.hostUrl+l,t.ballAvatarInit(g)}))}},t.ballAvatarInit=function(e){var t=this.mapGrid.getChildByName("ball_"+e.team+"_"+(e.memberNum-1));console.log(t),t.getComponent(a).setAvatarMat(e)},t.getPlayerInfo=function(e,t){return this.PlayerList.filter((function(l){if(l.team==e&&l.memberNum==t)return l}))},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/startBLive.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameInit.ts"],(function(t){var e,n,i,r,a,o,c,s,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,c=t.Node,s=t.Component},function(t){u=t.gameInit}],execute:function(){var l,p,f,v,g;a._RF.push({},"ba938FfrxNOA5RoHyTKeKpZ","startBLive",void 0);var y=o.ccclass,m=o.property;t("startBLive",(l=y("startBLive"),p=m({type:c}),l((g=e((v=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"gameInit",g,r(e)),e}n(e,t);var a=e.prototype;return a.start=function(){},a.startBlive=function(){this.gameInit.getComponent(u).getBliveData()},a.update=function(t){},e}(s)).prototype,"gameInit",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=v))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/testBtnTrigger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./canvas.ts","./gameInit.ts"],(function(t){var e,n,i,r,a,o,c,s,u,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,c=t.Node,s=t.Component},function(t){u=t.canvas},function(t){l=t.gameInit}],execute:function(){var p,g,f,y,m,v,h;a._RF.push({},"75263AA1xVG9Key+5OKzTAc","testBtnTrigger",void 0);var I=o.ccclass,b=o.property;t("testBtnTrigger",(p=I("testBtnTrigger"),g=b({type:c}),f=b({type:c}),p((v=e((m=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"canvasUI",v,r(e)),i(e,"gameInit",h,r(e)),e}n(e,t);var a=e.prototype;return a.start=function(){},a.testBtnClick=function(){this.canvasUI.getComponent(u).gamePushOn()},a.cancelAutoPlay=function(){this.gameInit.getComponent(l).cancelAutoPlay()},a.update=function(t){},e}(s)).prototype,"canvasUI",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=e(m.prototype,"gameInit",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y));a._RF.pop()}}}));

System.register("chunks:///_virtual/testEventTrigger.ts",["./rollupPluginModLoBabelHelpers.js","cc","./canvas.ts"],(function(t){var e,n,i,r,a,o,c,s,u,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,c=t.Node,s=t.instantiate,u=t.Label,l=t.Component},function(t){p=t.canvas}],execute:function(){var g,h,f,v,m,y,d,b,I;a._RF.push({},"e5b2fFzl/xF6IXZ3ZzeF2f/","testEventTrigger",void 0);var C=o.ccclass,z=o.property;t("testEventTrigger",(g=C("testEventTrigger"),h=z({type:c}),f=z({type:c}),v=z({type:c}),g((d=e((y=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a))||this,i(e,"chatContent",d,r(e)),i(e,"chatItem",b,r(e)),i(e,"canvasUI",I,r(e)),e}n(e,t);var a=e.prototype;return a.start=function(){},a.getInputValue=function(t){this.canvasUI.getComponent(p).gameStepVote(t.string);var e=s(this.chatItem);e.active=!0,e.getComponent(u).string=t.string,this.chatContent.addChild(e),t.string=""},a.scriptInputValue=function(t){var e=s(this.chatItem);e.active=!0,e.getComponent(u).string=t,this.chatContent.addChild(e),this.canvasUI.getComponent(p).gameStepVote(t)},a.update=function(t){},e}(l)).prototype,"chatContent",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(y.prototype,"chatItem",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(y.prototype,"canvasUI",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=y))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/testPhysics.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,l,n,o,i,s,r,a,u,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,l=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){i=t.cclegacy,s=t._decorator,r=t.Node,a=t.RigidBody,u=t.Vec3,c=t.tween,p=t.Component}],execute:function(){var y,h,g,f,m,d,B;i._RF.push({},"262ebeQAP5KzrSiygxmJ6he","testPhysics",void 0);var v=s.ccclass,b=s.property;t("testPhysics",(y=v("testPhysics"),h=b({type:r}),g=b({type:r}),y((d=e((m=function(t){function e(){for(var e,l=arguments.length,i=new Array(l),s=0;s<l;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,n(e,"testBall",d,o(e)),n(e,"mapGrid",B,o(e)),e}l(e,t);var i=e.prototype;return i.start=function(){},i.testPushBall=function(){console.log("testPushBall"),this.testBall.getComponent(a).applyLocalImpulse(new u(0,0,-10),new u(0,0,0))},i.testTotate=function(){var t=this;console.log("testTotate");var e=this.mapGrid.getChildByName("grid_5_5"),l=this.testBall.getChildByName("ball");l.lookAt(e.position);l.eulerAngles.y;this.testBall.getComponent(a).type=2;var n={x:this.testBall.eulerAngles.x,y:this.testBall.eulerAngles.y,z:this.testBall.eulerAngles.z};c(n).to(1,{x:0,y:l.eulerAngles.y,z:0},{onComplete:function(e){t.testBall.getComponent(a).type=1,l.setRotationFromEuler(0,0,0)},onUpdate:function(e){console.log(e),t.testBall.setRotationFromEuler(new u(e.x,e.y,e.z))}}).start()},i.update=function(t){},e}(p)).prototype,"testBall",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(m.prototype,"mapGrid",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=m))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/toElectron.ts",["./rollupPluginModLoBabelHelpers.js","cc","./windowMsg.ts","./IDcodeInput.ts"],(function(t){var n,o,e,r,i,c,s,l,u,a,p;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){i=t.cclegacy,c=t._decorator,s=t.Node,l=t.Component},function(t){u=t.windowAddEvent,a=t.windowPostMsg},function(t){p=t.IDcodeInput}],execute:function(){var d,f,g,v,y;i._RF.push({},"9389eChC69NI5XGzIzXbP8e","toElectron",void 0);var I=c.ccclass,h=c.property;t("toElectron",(d=I("toElectron"),f=h({type:s}),d((y=n((v=function(t){function n(){for(var n,o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return n=t.call.apply(t,[this].concat(i))||this,e(n,"idInputNode",y,r(n)),n.startConnect=function(){console.log("开始连接"),n.idInputNode.getComponent(p).submitBtnClick()},n}o(n,t);var i=n.prototype;return i.start=function(){console.log("cocos-------toElectron start"),u(this.node),a({event:"blive-start"})},i.update=function(t){},n}(l)).prototype,"idInputNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=v))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/voteCatapult.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"50144Tz++JE8bzF1S4pNk/q","voteCatapult",void 0);e("VoteCatapult",function(){function e(){this.redTeam=t,this.blueTeam=r,this.redGridVotePool=[],this.redPowerVotePool=[],this.blueGridVotePool=[],this.bluePowerVotePool=[]}var o=e.prototype;return o.getTeamVoteResult=function(e){return"red"==e?this.redTeam:this.blueTeam},o.voteCatapult=function(e,o,t){if(console.log("voteCatapult",e,o,t),"red"==e){for(var r=!1,i=0;i<this.redGridVotePool.length;i++)if(this.redGridVotePool[i].x==o.x&&this.redGridVotePool[i].y==o.y){r=!0,this.redGridVotePool[i].voteNum++;break}r||this.redGridVotePool.push({x:o.x,y:o.y,voteNum:1});for(var s=!1,u=0;u<this.redPowerVotePool.length;u++)if(this.redPowerVotePool[u].power==t){s=!0,this.redPowerVotePool[u].voteNum++;break}s||this.redPowerVotePool.push({power:t,voteNum:1})}else{for(var h=!1,l=0;l<this.blueGridVotePool.length;l++)if(this.blueGridVotePool[l].x==o.x&&this.blueGridVotePool[l].y==o.y){h=!0,this.blueGridVotePool[l].voteNum++;break}h||this.blueGridVotePool.push({x:o.x,y:o.y,voteNum:1});for(var d=!1,v=0;v<this.bluePowerVotePool.length;v++)if(this.bluePowerVotePool[v].power==t){d=!0,this.bluePowerVotePool[v].voteNum++;break}d||this.bluePowerVotePool.push({power:t,voteNum:1})}this.voteResult()},o.voteResult=function(){var e=this.voteResultGrid(this.redGridVotePool),o=this.voteResultPower(this.redPowerVotePool);if(e.length<3)for(var t=e.length;t<3;t++)e.push({x:2,y:7,voteNum:0});if(o.length<3)for(var r=o.length;r<3;r++)o.push({power:10,voteNum:0});this.redTeam={gridPos:{first:e[0],second:e[1],third:e[2]},power:{first:o[0],second:o[1],third:o[2]}};var i=this.voteResultGrid(this.blueGridVotePool),s=this.voteResultPower(this.bluePowerVotePool);if(i.length<3)for(var u=i.length;u<3;u++)i.push({x:2,y:0,voteNum:0});if(s.length<3)for(var h=s.length;h<3;h++)s.push({power:10,voteNum:0});this.blueTeam={gridPos:{first:i[0],second:i[1],third:i[2]},power:{first:s[0],second:s[1],third:s[2]}}},o.voteResultGrid=function(e){e.sort((function(e,o){return o.voteNum-e.voteNum}));for(var o=[],t=0;t<3;t++)e[t]&&o.push(e[t]);return o},o.voteResultPower=function(e){e.sort((function(e,o){return o.voteNum-e.voteNum}));for(var o=[],t=0;t<3;t++)e[t]&&o.push(e[t]);return o},o.clearVotePool=function(){this.redGridVotePool=[],this.redPowerVotePool=[],this.blueGridVotePool=[],this.bluePowerVotePool=[],this.redTeam.gridPos.first.voteNum=0,this.redTeam.gridPos.second.voteNum=0,this.redTeam.gridPos.third.voteNum=0,this.redTeam.power.first.voteNum=0,this.redTeam.power.second.voteNum=0,this.redTeam.power.third.voteNum=0,this.blueTeam.gridPos.first.voteNum=0,this.blueTeam.gridPos.second.voteNum=0,this.blueTeam.gridPos.third.voteNum=0,this.blueTeam.power.first.voteNum=0,this.blueTeam.power.second.voteNum=0,this.blueTeam.power.third.voteNum=0},e}());var t={gridPos:{first:{x:2,y:7,voteNum:0},second:{x:0,y:0,voteNum:0},third:{x:0,y:0,voteNum:0}},power:{first:{power:10,voteNum:0},second:{power:0,voteNum:0},third:{power:0,voteNum:0}}},r={gridPos:{first:{x:3,y:0,voteNum:0},second:{x:0,y:0,voteNum:0},third:{x:0,y:0,voteNum:0}},power:{first:{power:10,voteNum:0},second:{power:0,voteNum:0},third:{power:0,voteNum:0}}};o._RF.pop()}}}));

System.register("chunks:///_virtual/voteSelectBall.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"c3cb19i6xJByZHSwwS0vOpx","voteSelectBall",void 0);var o={first:{ballIdx:0,voteNum:0},second:{ballIdx:0,voteNum:0},third:{ballIdx:0,voteNum:0}},l={first:{ballIdx:0,voteNum:0},second:{ballIdx:0,voteNum:0},third:{ballIdx:0,voteNum:0}};e("VoteBall",function(){function e(){this.redTeam=o,this.blueTeam=l,this.votePool_red=[],this.votePool_blue=[]}var t=e.prototype;return t.getTeamVoteDetail=function(e){return"red"==e?(this.voteResult(),this.redTeam):"blue"==e?(this.voteResult(),this.blueTeam):void 0},t.clearVotePool=function(){this.votePool_red=[],this.votePool_blue=[],this.redTeam.first.voteNum=0,this.redTeam.second.voteNum=0,this.redTeam.third.voteNum=0,this.blueTeam.first.voteNum=0,this.blueTeam.second.voteNum=0,this.blueTeam.third.voteNum=0},t.voteBall=function(e,t){if("red"==e){console.log("red",e,t);var o=!1;this.votePool_red.forEach((function(e){e.ballIdx==t&&(o=!0,e.voteNum+=1)})),o||this.votePool_red.push({ballIdx:t,voteNum:1})}if("blue"==e){console.log("blue",e,t);var l=!1;this.votePool_blue.forEach((function(e){e.ballIdx==t&&(l=!0,e.voteNum+=1)})),l||this.votePool_blue.push({ballIdx:t,voteNum:1})}},t.voteResult=function(){var e=this.redTeam,t=this.blueTeam,o=this.votePool_red,l=this.votePool_blue;if(o.length>0){var u=o.sort((function(e,t){return t.voteNum-e.voteNum})),i=u[0],d=u[1],v=u[2];e.first.ballIdx=i.ballIdx,e.first.voteNum=i.voteNum,d?(e.second.ballIdx=d.ballIdx,e.second.voteNum=d.voteNum):(e.second.ballIdx=null,e.second.voteNum=0),v?(e.third.ballIdx=v.ballIdx,e.third.voteNum=v.voteNum):(e.third.ballIdx=null,e.third.voteNum=0)}if(l.length>0){var r=l.sort((function(e,t){return t.voteNum-e.voteNum})),s=r[0],a=r[1],m=r[2];t.first.ballIdx=s.ballIdx,t.first.voteNum=s.voteNum,a?(t.second.ballIdx=a.ballIdx,t.second.voteNum=a.voteNum):(t.second.ballIdx=null,t.second.voteNum=0),m?(t.third.ballIdx=m.ballIdx,t.third.voteNum=m.voteNum):(t.third.ballIdx=null,t.third.voteNum=0)}this.redTeam=e,this.blueTeam=t},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/websocket.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"4429cO2uidMEYaBb3yUDO5Q","websocket",void 0);e("default",{hostUrl:"ws://127.0.0.1:9000/chat/myroom/",initWebSocket:function(e,t,o,c,n){var r=new WebSocket(e);return r.onopen=t,r.onmessage=o,r.onerror=c,r.onclose=n,r}});t._RF.pop()}}}));

System.register("chunks:///_virtual/windowMsg.ts",["cc","./toElectron.ts"],(function(o){var e,t;return{setters:[function(o){e=o.cclegacy},function(o){t=o.toElectron}],execute:function(){var n;function s(o){if(console.log("-----message事件 changeSomething"+JSON.stringify(o)),"bliveroom"==o.event){console.log(o.data);JSON.parse(o.data);localStorage.setItem("bliveRoom",o.data);c({event:"code-saved"})}"start-conect"==o.event&&n.getComponent(t).startConnect()}function c(o){window.top.postMessage(o,"*")}o({windowAddEvent:function(o){console.log("------cocos window监听添加message事件"),n=o,window.addEventListener("message",(function(o){console.log(o.data),s(o.data)}),!1)},windowPostMsg:c}),e._RF.push({},"57c419MGrNNX55Q93zi6K0v","windowMsg",void 0),e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});